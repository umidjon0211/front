<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>White Countries Cards</title>
    <link rel="stylesheet" href="white.css">
</head>

<body>

    <div class="navbar">
        <h1>Where in the world?</h1>
        <button id="mode-toggle" class="dark-mode-btn">ðŸŒ™ Dark Mode</button>

    </div>

    <div class="controls">
        <input type="search" placeholder="Search for a country..." />
        <button class="filter-btn">Filtered by Region</button>
    </div>

    <div class="container">

    </div>


    <div id="details" class="details"></div>d
    <script>
        // document.addEventListener('DOMContentLoaded', () => {
        //     const searchInput = document.querySelector('input[type="search"]');
        //     const container = document.querySelector('.container');

        //     const res = () => {
        //         fetch('https://restcountries.com/v3.1/all?fields=name,population,region,capital,flags')
        //             .then(res => res.json())
        //             .then(data => {
        //                 container.innerHTML = '';
        //                 data.forEach(s => {
        //                     const box = document.createElement("div");
        //                     box.className = 'box1';

        //                     box.innerHTML = `
        //                     <img src="${s.flags?.png}" alt="${s.flags?.alt || 'Flag'}" />
        //                     <h1>${s.name.common}</h1>
        //                     <p><strong>Population:</strong> ${s.population.toLocaleString()}</p>
        //                     <p><strong>Region:</strong> ${s.region}</p>
        //                     <p><strong>Capital:</strong> ${s.capital?.[0] || 'N/A'}</p>
        //                 `;

        //                     container.appendChild(box);
        //                 });
        //             })
        //             .catch(err => console.error("Xatolik yuz berdi:", err));
        //     };

        //     // Filtering function
        //     searchInput.addEventListener('input', function () {
        //         const searchTerm = this.value.trim().toLowerCase();
        //         const countryBoxes = container.querySelectorAll('.box1');

        //         countryBoxes.forEach(box => {
        //             const countryName = box.querySelector('h1').textContent.toLowerCase();
        //             if (countryName.includes(searchTerm)) {
        //                 box.style.display = 'block';
        //             } else {
        //                 box.style.display = 'none';
        //             }
        //         });
        //     });

        //     res();

        //     const toggleBtn = document.getElementById('mode-toggle');
        //     const body = document.body;

        //     toggleBtn.addEventListener('click', () => {
        //         body.classList.toggle('dark');

        //         if (body.classList.contains('dark')) {
        //             toggleBtn.textContent = 'â˜€ White Mode';
        //         } else {
        //             toggleBtn.textContent = 'ðŸŒ™ Dark Mode';
        //         }
        //     });

        // });




        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.querySelector('input[type="search"]');
            const container = document.querySelector('.container');
            const toggleBtn = document.getElementById('mode-toggle');
            const body = document.body;

            // Dark mode holatini localStorage dan olish va o'rnatish
            if (localStorage.getItem('darkMode') === 'enabled') {
                body.classList.add('dark');
                toggleBtn.textContent = 'â˜€ White Mode';
            }

            const res = () => {
                fetch('https://restcountries.com/v3.1/all?fields=name,population,region,capital,flags,cca3')
                    .then(res => res.json())
                    .then(data => {
                        container.innerHTML = '';
                        data.forEach(s => {
                            const box = document.createElement("div");
                            box.className = 'box1';

                            // cca3 kodini data-code atributiga qo'shamiz
                            box.setAttribute('data-code', s.cca3);

                            box.innerHTML = `
        <img src="${s.flags?.png}" alt="${s.flags?.alt || 'Flag'}" />
        <h1>${s.name.common}</h1>
        <p><strong>Population:</strong> ${s.population.toLocaleString()}</p>
        <p><strong>Region:</strong> ${s.region}</p>
        <p><strong>Capital:</strong> ${s.capital?.[0] || 'N/A'}</p>
    `;

                            // Flag bosilganda detail.html ga o'tish
                            box.addEventListener('click', () => {
                                const code = box.getAttribute('data-code');
                                window.location.href = `detail.html?code=${code}`;
                            });

                            container.appendChild(box);
                        });
                    })
                    .catch(err => console.error("Xatolik yuz berdi:", err));
            };

            searchInput.addEventListener('input', function () {
                const searchTerm = this.value.trim().toLowerCase();
                const countryBoxes = container.querySelectorAll('.box1');

                countryBoxes.forEach(box => {
                    const countryName = box.querySelector('h1').textContent.toLowerCase();
                    box.style.display = countryName.includes(searchTerm) ? 'block' : 'none';
                });
            });

            res();

            toggleBtn.addEventListener('click', () => {
                body.classList.toggle('dark');

                if (body.classList.contains('dark')) {
                    toggleBtn.textContent = 'â˜€ White Mode';
                    localStorage.setItem('darkMode', 'enabled');
                } else {
                    toggleBtn.textContent = 'ðŸŒ™ Dark Mode';
                    localStorage.setItem('darkMode', 'disabled');
                }
            });
        });

    </script>



</body>

</html>